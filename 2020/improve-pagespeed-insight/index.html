<!DOCTYPE html><html><!DOCTYPE html><head><title>提高 Hexo 加载速度 | 潮与雪 - Rapiz</title><link rel="stylesheet" href="/css/style.css"><script src="/js/utils.js"></script><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta name="robots" content="index,follow"><meta name="author" content="Rapiz"><meta name="keywords" content="潮与雪,Rapiz,Rapiz,OI,ACM,HUST,乔羽佳,博客,Blog,算法,开源软件,题解,SEO,Hexo,DEV,PageSpeed Insights,disqus,懒加载,百度爬虫,GitHub Pages"><meta name="description" content="潮与雪,Rapiz,凡人难以承受生活全部的真相，于是他们各执一端。,Rapiz,提高 Hexo 加载速度,提高 PageSpeed Insights 得分"><meta name="viewport" content="width=device-width,initial-scale=1"><script src="https://cdn.jsdelivr.net/npm/mermaid@8.5.1/dist/mermaid.min.js"></script><script>window.mermaid&&mermaid.initialize({theme:"neutral"})</script><link rel="canonical" href="https://rapiz.me/2020/improve-pagespeed-insight/"><meta name="generator" content="Hexo 5.0.2"><link rel="alternate" href="/atom.xml" title="潮与雪" type="application/atom+xml"><link rel="alternate" href="/rss2.xml" title="潮与雪" type="application/rss+xml"></head><body><script src="https://cdn.jsdelivr.net/npm/prismjs@1.20.0/components/prism-core.min.js"></script><script src="https://cdn.jsdelivr.net/npm/prismjs@1.20.0/plugins/autoloader/prism-autoloader.min.js"></script><div id="wrap"><header id="header"><div id="nav"><div id="nav-items"><div class="underline-trans"><a href="/">Home</a></div><div class="underline-trans"><a href="/links">Links</a></div><div class="underline-trans"><a href="/portal">About</a></div></div></div></header><main class="main" onchange="FanfouFix()"><article class="post markdown-body"><div class="post-title"><h1 class="title">提高 Hexo 加载速度</h1></div><div class="post-meta"><blockquote>提高 PageSpeed Insights 得分</blockquote><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#PageSpeed-Insights"><span class="toc-text">PageSpeed Insights</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%99%BE%E5%BA%A6%E7%88%AC%E8%99%AB"><span class="toc-text">百度爬虫</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%9D%99%E6%80%81%E8%B5%84%E6%BA%90%E5%8E%8B%E7%BC%A9"><span class="toc-text">静态资源压缩</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Reference"><span class="toc-text">Reference</span></a></li></ol><span>In <a class="post-category-link" href="/categories/DEV/">DEV</a> </span><span class="post-author">By Rapiz</span> <span class="post-time">2020-08-23</span> <span class="post-tags"><a class="article-tag-none-link" href="/tags/Hexo/" rel="tag">Hexo</a>, <a class="article-tag-none-link" href="/tags/SEO/" rel="tag">SEO</a> <span class="post-meta-keywords">PageSpeed Insights,disqus,懒加载,百度爬虫,GitHub Pages</span></span></div><div class="post-content"><p></p><h2 id="PageSpeed-Insights"><a href="#PageSpeed-Insights" class="headerlink" title="PageSpeed Insights"></a>PageSpeed Insights</h2><p>试了试 Google Search Console 里的 PageSpeed Insights 发现得分只有四十多——我还一直觉得自己网站加载挺快的呢。</p><p>仔细一看基本上是 Disqus 拖累了网站的加载。 Sukka 写了一个懒加载 Disqus 的脚本，可以在屏幕滑倒评论框的时候再去加载 Disqus。复制粘贴之，手机版性能评分达到 40+， 电脑版达到 100。</p><h2 id="百度爬虫"><a href="#百度爬虫" class="headerlink" title="百度爬虫"></a>百度爬虫</h2><p>顺带一提，还没优化前，PageSpeed Insights 给出的加载时间和百度爬虫的“爬取诊断”所耗时间差不多，我留心了一下。百度爬虫一直要用大概 3 秒的时间爬取页面。我还以为是因为百度服务器到 GitHub Pages 访问较慢的原因。但 GitHub Pages 最近加了几台服务器，在大陆的访问情况也挺好的，百度爬虫怎么就爬不好呢？其实还是 Disqus 加载速度太慢的原因。</p><p>用了 Sukka 的脚本之后，再次爬取诊断，加载速度降低到 0.8s，效果拔群。</p><p>我一直也觉得百度对本站收录一直非常少，也有加载速度慢的原因。以后再看看吧。</p><h2 id="静态资源压缩"><a href="#静态资源压缩" class="headerlink" title="静态资源压缩"></a>静态资源压缩</h2><p><code>html, css, js</code> 这些资源是可以通过 <code>gulp</code> 等工具进行压缩的。<a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/rozbo/hexo-neat">这里有一个 Hexo 插件 hexo- neat 自动化了压缩流程。</a> 不过在我的博客上 <code>js</code> 压缩没有起作用。可能是插件的一个 Bug。</p><h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><p><a target="_blank" rel="noopener external nofollow noreferrer" href="https://blog.skk.moe/post/prevent-disqus-from-slowing-your-site/">使 Disqus 不再拖累性能和页面加载</a></p></div></article><div class="page-nav"><div class="underline-trans"><a href="/2020/deepin-com-qq-office-fonts/">解决 deepin.com.qq.office 使用 Noto 日文字形的问题 ▶</a></div></div><section id="comments"><div id="disqus_thread"><script type="text/javascript">var disqus_shortname="rapiz";function loadDisqus(){var e=document,n=e.createElement("script");n.src="https://"+disqus_shortname+".disqus.com/embed.js",n.setAttribute("data-timestamp",+new Date),(e.head||e.body).appendChild(n),window.disqus_config=function(){this.page.url="https://rapiz.me/2020/improve-pagespeed-insight/",this.page.identifier="/2020/improve-pagespeed-insight/"}}var runningOnBrowser="undefined"!=typeof window,isBot=runningOnBrowser&&!("onscroll"in window)||"undefined"!=typeof navigator&&/(gle|ing|ro|msn)bot|crawl|spider|yand|duckgo/i.test(navigator.userAgent),supportsIntersectionObserver=runningOnBrowser&&"IntersectionObserver"in window;setTimeout(function(){var n;!isBot&&supportsIntersectionObserver?(n=new IntersectionObserver(function(e){e[0].isIntersecting&&(loadDisqus(),n.disconnect())},{threshold:[0]})).observe(document.getElementById("disqus_thread")):loadDisqus()},1)</script><noscript>Please enable JavaScript to view the <a target="_blank" rel="noopener external nofollow noreferrer" href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript></div></section></main><div id="typography-footer"><p>Powered by <a target="_blank" rel="noopener external nofollow noreferrer" href="https://hexo.io/">Hexo</a> | <a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/Rapiz1/typography">Typography</a> designed by <a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/Rapiz1">Rapiz</a></p></div></div><script type="text/x-mathjax-config">MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ["$","$"], ["\\(","\\)"] ],
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
            processEscapes: true
        }
    });
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax();
        for (var i = 0; i < all.length; ++i)
            all[i].SourceElement().parentNode.className += ' has-jax';
    });</script><script src=https://cdn.jsdelivr.net/npm/mathjax@2.7.8/MathJax.js?config=TeX-AMS-MML_HTMLorMML></body></html>